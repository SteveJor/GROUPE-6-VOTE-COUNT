<div class="modal-backdrop"></div>

<div class="modal-dialog">
  <div class="modal-content">

    <div class="modal-header">
      <h3 class="modal-title"><i class="fas fa-lock me-2"></i> Configuration de sécurité</h3>
    </div>

    <div class="modal-body">

      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>

      <p>Bienvenue **{{ user.nom }}** ! C'est votre première connexion. Veuillez configurer votre mot de passe unique qui sera requis à chaque fois que vous voudrez voter.</p>

      <form (ngSubmit)="setupPassword()">
        <div class="form-group">
          <label for="newPassword">NOUVEAU MOT DE PASSE</label>
          <input id="newPassword" type="password" [(ngModel)]="newPassword" name="newPassword" required />
        </div>

        <div class="form-group">
          <label for="confirmPassword">CONFIRMER LE MOT DE PASSE</label>
          <input id="confirmPassword" type="password" [(ngModel)]="confirmPassword" name="confirmPassword" required />
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="cancel()">Annuler et Se Déconnecter</button>
          <button type="submit" class="btn btn-primary" [disabled]="isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            {{ isLoading ? 'Enregistrement...' : 'ENREGISTRER' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
